input = """##################################################
#.O#..O.O..OO..O.OO.#..O...O.O.##O.O..O.O...OOO..#
#..#O.........OO.OO......O..#.O.O.O.O....O#OO.O..#
##O......O.O...O...O..#.OOO......O.O.O.....O.OOO.#
#.OOO#O.O..O...O...O#O...O...O...O#O.......O.OOO.#
#.OO...#...#O.#...#...O..O.#.O.OO...#OO.OOO...O.O#
#..O..OOO.O......O....O............OO...O.#.#..#O#
#OO.OOO#.O.......O##........O..O....O.....#O.....#
#...OO..O..OOOO....#..#.OOO.O...O..O.O.....O.....#
#..O.#.O.O..........O...#.O........#......O..#.#.#
#.O...O#O.O.O......#..O#O....#..O...#....##......#
#..O...#.O#..O.....O...O#O.....O#.O#..#...#OOO...#
#..O...OO.O............O.#.O.O..O....O.O.O.......#
#..OOO.......O.##.O.O.#.O...#.#O#........O.O#O#..#
#......#O#.O.#.OO.OO....O..O.O.OO.O#....OO......##
#O.#O#...O.OO..O..OO.#..O.O.......O....OOO.......#
#.....O.O.O...##O..##.##.O.O#OO.O.#O#........O.OO#
#......O.........O..O.#..............#.O.#.O..O..#
#.O...O.OOO..O.O.....O...O..O......O.OO...OO..O###
#.O....O##O......OOOO..OO...O.....#...O....#..#..#
#O....O...O..#....O.....O..#......O....OOO.O.....#
#.....#.O..O..O..O.O.OO.O.O.#O.........OO.O.O....#
#....O.....O.O....O...O...O...O..O....O...OO..O#.#
#..OO..#O.O..O.....O...O..O...O.O....OO...O..#...#
#OO..O....O.O.O..O.....O@...OO#....OO.O.OO#O#O.#.#
#....O.OO......OO#.OO.O.#OOO.OOO.......#..O..O...#
##.O#.O............O...#...OO.OO........OO.OO#...#
#O.....O.O#OO........O#O......#...#O.O.OO..O...O.#
#.....O.#..OO#.OO...O...O.OO.#O.OO.O......O....OO#
#O.#.....##O.O......O...O.O#.O....#O.O..O...O....#
#.O#.....#..........O.#..O#..O..O#O...O.#O#O.....#
#.#..O.O..#.O##.O.OOO....O....O...OO..O..O...O#..#
#O.....O.....O..O.OO.O.......O......O.OO.OO......#
#O.OO.O....#..OO..O....O.#...#..#.......O#.OOOOOO#
#.............O#OO.#....O.......OO#......O.......#
##.OO.O..O.....#..#O....#O.O...#.O..OO....OO.O...#
#....O...OO.#..O.OO.OO.OOO........O..........O.O.#
#O.O..O.......O...#O...O.O...#...O#.....O...O.O.O#
#...#.O..OO.OO....O....O..O...O....O#..OOO.......#
#...#..OO..O.......O.O.O.OOO.O.#...O#.#..#O..#...#
#.O#..O..OO..#O...O.#.....O..O......OO.OOOO##.O.##
#.#O....O.......O.#O.....O....#...O....OO.......O#
#...#....O..O..........OO...OO#.....OO..O...O.#O.#
#.O.#O.#....O..#.OO.O#..##.....OOO..#OOO...##O..O#
#...O...O..OOO......##OOO.....O....#......O..#...#
#...O...#O#...#...O.........O.O....#O.OO.....O.OO#
#O....O..##.O#....O....#.OOO#O..O..#O....#.O.....#
#......#O...OOO...O..#...O.O#...........OO..O...O#
#O....O...O...O.#O..O..OOO..#.OO.O.O.........O...#
##################################################

v<<<v<v>^^<><>vv^^><<^^>^>v<v^^^v<<^<v>v^vvvv<vv<^v>^<vv<^^>^<>^>>^^><>v>>>^<vv<<>vvvv<^^<^<<^><<^v<^^>>><>>><><<<>v>^^^<^^><v><v<^v^<^<><vv>>^vv>^^<<^^v<v<^v<^v<v>^<<^v><>vv>v<<^<<v>^vv^<^>^v<^vvv>^>>^v>^>v^>v^^vv^v>>^<v<>v<<<^>v>>^^<><v^<v><<^^>v<vv>><<v^<>vv^^>v^<v^^>v<^<>>>^v>v^^v^>^^>>v>^v^v>v>>>vv<vv^>^>>^vv>^>v^<<<>^>>^<>^^><<>>^>^^v>v>^^v^^^^>^<v<>^<^>^<v<^<v><><<>^>v<<<^^v^<><^vvv>>^v>vvv^^<>>v^<<>>v<><v^>>^^v>>>^^v^v<>v>^^>v<^<vv^^v<>^<<v<>><<<>^v<v>^<^vv>^><<<><<>v<v<>>vvv<<<v<>^<^v^^<>>>><v^^^^<v^v^v<>><>><^v<>><<v<v^>><v<vv>vv^v^<<^v<<<<v<^<^v>><v>^>><>^<<vv<^^<><<^<>>v<><><vv^>v<^vvv^<v<vv<^^^<vv><v^>>^<^v^vv>^^<v<><^>><>><<^>^<v<<^<><>v<^>v<^<>^<v>^v><^v><>>^<v>v^<vv><^<>^v^^<>vv<v^><v>^<><^>v<<vv>^vvv><^^>vv<<^^^<<<><<<<^v^><<v^^<^><<^v<>vvvv<^^vvv>>^^v>^v<^<v^<><v>v^<^v>^>^^<<><><vv<><>>^^><^^>v>><<<>>v<v>>v^>^<^<<^<vvv><<<>^v^>^<<vv><<<v^^<^<<>^>^v^<<<v><vv^<<<v>^^vv>v^^v<^>^>v><vv>^<>>><<^>vv<v^>v^v><>^^^<>v>vv^<<vvvvv<v^v>>>>>v^<vv>^v<^>v^^>v^>^<><v^^>>^><<^vv<^>v<^
<v^^<^^<v>>^>v^v<><^^<<><<v><<^^v<>vv<^><v>^^^>>^v^>^>^vv<<^<<<v^<>>>>v^<<^vv><<^^>><>^>>v^^<^>^><>v>>^><vv>vv^v>>v>><<^v<<v^^v^<><v>>v^vv><<>v^><v^^<>^>>>><>>>^>>v>vv^vv>^>>>v>^^<^vv<v>><^<<>^>>>>v^vvv><<^<^v<<^^^>^^<^>vvvv<vv<>^v<>^vv<v<v<<v^v<<v^v<<^<<v<^<v>><^<>^>vv<<<>^v<<<>vv>^<<^>><<^<<><<>^>>^v<>>>^v>^v>^>v<<^<^^^>^><^>>>v^<^^><><>^>v>v>v>^>^v<<>^<>^><>><<^<v><>^>^<v>v<<^v^v<><v^<^<v<v^vv<vv><<^vv^>>^v>vv>v<<<vv>>>>>^v<><<v<^v>v<<v<>^^^>v^^><<^>v<v>v<^<vv<<><^v>>vv^v^^^>v^<v>><<>^vv>^<^^^>vv<^>v<>^^<v>^^>v>>v^<^<v<^>v>>^^<>>vv<^^^<<><<^<>v<<>>^<>v<<^v><^<^^v<v^<>^<^^>>^vv<>vvv<^v>>^^<^>v^^>v^v<vvv^^<^>>vvvv^><>>v>v><v^<<^<v<^vv<<v>v<v<^v<>>>^>v<<><^><>^<>^v>>>^><<vv^^v>>^^v>>v^<^<v<>^^^^<^v>vv^^vvv<v>vvv^<v^>vvv<<^<<><<v<^^v>^^^>vv>^<vv<<v^>v^^v^vv<^v<<>><>^>vv><<>^vv^<><>vv>><<v<<<<<><^<>^vvv>vvvv^<><<<^v>v<>vv>><v<>^v<<v>v<vvv>>>vv<v>v>v<><<<^>v<^>v<<>^>v<><>v^v^vv^^<<^><><>v<>^^<v^<vv><>^>^>^>v>^^v^^<<vv^>^^vv<<^^<^^v<<v^v<v>^<^vv>v><<v<^>>>vv>^v<><<v^>v^^<v^<^v<>v<<^^v>^<vv
v^<><^vv<^>v>v<>^<<vv<<v><^v>><>>^v<<>^v^>^>>vv^^>vv^<vv<<>v^vv<<v^><^^<v<^^<^v^vv^v^<v^^v<vv>>^<v^^>^>>>>vv>v<<<^^<>^^>v<^v<<^^^>^^^^^<v<vv>>vv^>>^>><vv^<v^<<><>>vvv<<vv>v^>^^><<^^<<^v>^v<v>>^><^<v><<<><>>^><><vvv<<<<<^v^>v^<v<><v<><vv>v<v><><>v>^>>><>^<<<v^>^<>>>^^>>>^<^>>^^<^><><<vv>>^^v^v^>^^><>v>^^<>v>v^^v>^v^v<>><^v<<>^^^vv^<<^><^vvv>>^<<<><<vv<<^<vv^^<v>^^^>>><<><>>>^v^^<>^^^>^vv<>>vv<>>vv>v^>v^v^v^^v>vv<<>^v>^>^^>^>>v^v^><<^<>>vv^^<>vv><>>v^^>v>v<>>v^^v>^^v<v>^vv<^vv>>>>^<^^<^<vv^v>>><<>^<>^>^<^>>^>^^>>v>>v^>>^^v^><v^<<^v^<^>^>v^^>vv<^>^^<<><<^^<^><^<v>>^^<<<>>v<^>^vv<<<v<>v<vv>^v^>><^^^^v^v^<<><>^><^v<^<>>>^<vv><<<^^<^<>>^v<<v^^>><vv^<^v>^vv<^>>>^vv<^<>^><^>^><^>><v^vvv^><^v<<<>v^vv>^<><<^v<<<v^<v<v>^<<^v<<>^^><^vv>^<<<vvv>><<vv<>v<>v>><^>^>^v>>^^vv<^vvv^><<>v<>^^^>v^><^<<v><><v<vv^v>v^<^v<><>>>^v>^<vvvv^vvv<^^><<^^<>v<v^>v<^v>^>^^^>v>^>><vv^v<<<>v>^<^<><<vvv<>^>vvv^>^^<v>v<v^vv^vv>^^^><vv^><><v<v^vv^v^<v>^v><>v<><<^v>><<><<>v>^><vvv^v>v<v<vv^v^v^><v<>^<>v^><><^<v<^<>v^v>>^^<>
vv^<>^<>v<><v<<>^<<^v^<><><^<<vv>^>>v^>v<^^<>>^>^<<<v>^v<<^><>v^^v^<>v^^<v<>v^<v>^><^<<v^v>^<<<v<><^><^>>><v^>v>^>vv^vvv><v<>^v^>><v>><<v><^v>>^vv^><<<v<>>v^><v^>>^vv^<^vvv^v^v^<^^v>>v^v^>><v<<>>vv^><>^v^<^>^>^><^v^v^^>>^^<v>vvvv><>^>>>v><>^v<<v^>v<^<^<^><^><vv>^<^^>^>vv^v><<^v^v>v^vvvv^>^v><>v><<v^vvvvvv^>v<>^>vv>^v^<>v^^>v^<^v<<<>v^<^^><vvvv^>^v>^<>>^><v^^<v<v>v^^^<>>v>^^<v<<<v^^vv><v^vv^^<<v^v^vv>^^^>>^<<v<>^^<>>><>>vv<<v<>^^><vv^>>v<>^<^^<>^vv<v>^>>v<<>^^><^<^^^><>>^>>v><<>^v<>><><<v>^v>v>^>><><>^>>^><v>^<^>v^v^<<<v<<^^vv>>>^^<>><^^^^>vvvvv<^<<<>vv<v<>>^<v>>>^^^>^^<<><><^>>>^^v<v<>v><^<<<v^>^<<>^^v^vvv>^<^vv^^><^v^<><>v><^v>>><^<>>v>v^<v^v^>><<<^<<^<<^^>^<^vv>>>^^^><^<<v>v><v^^vv><vv<<^>v^>^vv>v>vv<v^^v^v><<^<<v<^v^v>v^<<v>>^v>^^^v<>v^v>>^<^v>v^<v^v><<v<>><v<<v<<>^^<>>^v<><v<><<v^^<^^>^v<<>v^>^v><v>>>><>^v<v^>><>^>v<vv^<<<>>^^^^<vv^>><^^>^>v>^^^v^v><<^>v<v<>^>^<^<><^v>vv^<^>><><>vv>>vv>v^^^v<^<<v>^^v>^^<<^v<v^v^^v^^<^>><^^^<<v<>v^^v^<v^>v^><^>>>v>>^^>v<^<>>v<<^^v<<><<v>^>><><<v<^>v
>>^>>v^<<>>vv<^^v^^>^<><>>>^>v<>vv><^^^>^>>^<>v^vvv^v^^<v>v>>><vv^v<v^>><<<>^^<>vv<vv^v>>>>v^^v^vv<^<^>^^^>>v>^>>>v^<>v^<^^vv<vv>v<>v^<^^v<<<v<^^>v<<^>v^v^<v^>^^<v<>v^<>>^<^v>><>v<^<^<v^v<<^<^^^>v>^>>><^>><^<<><>^v>>^^^vv<<v<><v^>v><vvv<>>v>><<^^v^^^v^^vv<>v><v><v^vvv^><^>^v<>^>^vv>v^<>vv<>>^v<v<v^<>^^>>>^<<v^>^><<<^>><>v^v>>>><<<^v<^v^<<^<vv<^v<^^><>>v<>^>v<<v^<^v<<^^<^>>v<vvvv^v<v^>v<>^vv<<><vv^^vvvvv<<^^^vv<><><<^<v<^>>v<^<<^v^vv^<>v<^>vvv^v><^>>^<<^v^<>^><<<^^><^vv^<^^^<>><<vv<^v<<>><v^v>v^^<<v^<v>^>^^<^^^^>^<<<v<^v^><^v^<^>>v>v<^vvv<><v>>><>>v><^>>>vv<vv<<^vv<^<vv^^vv<><v<^<><vv>v^v<v^<<^vv<<>^<v><<><>vv^<^^^>vvvvv^<<v>vv>>><v^v<<^<>v^<^v<<vv><vvv<<>vv^<>vv^>v<v^v>^<^v^<<^<<^<<v<><^vv^>>^<><^^^^v<<<^<<>v>^^v^><^v^<^<>vv^>>v<^v><><v<>^v<^^>><v^>v>>vvv<v>v<^^^<<<v>>^<><<>^<<v>><><>v>^>>v>>><<<<^<>v>^^^^><v<>vv^><<^v<^v^<>^^<<>vv<^v<v<>v<^vv^v^>^vv<v<^v<><v>>^^^^>><^>^^>v<>^<><v<v^v<v>^>>v>^^<>v>^><^>^><^>v<v<>>v>>^v>v><<v^<vvv<v^^<<<<^^v<^<^<><>>>^><v<>^^^<^<v<v^^v>^><><<v^v<<vv>^<>
v><^>v<>v<^<^<^<<v^>>v<^v^<^<vv^<<>>>vvvvv<>>>>^<v<^v>>>^<^^<<v^^v>^^^^v^>v^>v^^v^>^^^<>^^>>vvv^>><>^v<<^vv>v>>v^<>v^^^v<^v>vv^>>^v>v<>>^v^<>vvv<v<<^^>vv<^^v^>>v^>^v^^>><>vvv^v^<v^^^^^<<<v>^>v><<vv<v>v<^>vv<^>^v<>^>><v^<>>>v^<>^^<<^v^v<>>v<>><<v>v^v>><>><>^vv^<vv^vv<v>>^<v^v^>><^<>v^>>><>v^vv<v<>><<v><v<>>v>>><<>>^^v^^><>^^<v<<<vv>v^^<<<<<v^^^v^<^>^^^<^><>v<<v>^>>v<^>><^<^<<<>>^^<>>^v>v<vv^<>^^^<v><^^<<v><^<<v<^><^v>^<><>>v^^^v<><<>^<<^^^<>^>^v<^>>^<^<^<^<>>v<>>>^^<vvv><<^<><^^^>>v^<<<>>v^<v^v^^>v^v^<^^><><^^<v>>vvv^vv<^^>>>><^^v>><v<v^v^>>><><<><<>>v^v^v<^^v>v^^^^^v><v>v>>>v^>^^>>>^v><<^<><^<^><<>>^^^^^v<^^v^^^v><^^<^vv>>^<^^>>>><<<>v<>^>^^^><v>v><>^^^^^v>>>^<^<<<><v<v>><^>>^v><v>v<v<><^<<^>v^>>^^<v<^^>v><^v^><>^<<^v>^>v<>>^^<>^v^<<^v<<><<>vvv><^<v<>^^>^>v^vv>^^^vvv<>v^<v^vv<<v<<<<^^<^<>>^^<>>^v^<>^vv>v>>^^^<^<v^>^>^^>>v>><^<^^^^>^^>^>^v><<><^><>^<<v>>>^>^v<^>^<>v>^<>^<>><v^vv<^<vv<>^v^<v^v<<^^<v^<><^>><<^>vv<<^<vvv<<<>v<<<<^><>^^^v^v<>^v>v^<<>>^>>v^>^vvv^^<><<<>>><<v^<<>><^vvv>^>v<vv
<>>^^><<v^><vv<^<><>>v<^<>>v^v>>v<^^<>v<<<v>^>^<<vv<v>vvv^<<^<<^>v^v>^^<<v><<<>v<<v<>>^^>>^v<^v<>v<^>><vv^><>>v><v<<<<<^^^>v><>^^v>v<<v^<<^><^<v^^<v^v<><<v^vv<>^^^v^v><<>v<^<><<^v>>>^<>^>^^^^<<v^v<><<^<>vv^^^<^vvv<v<<vv<>^v<<^<<vv<>>vv<>^^>^<vv<^v^<<^^^<<vv^^<^><v><^<<v^vvvv<>>><<<^^><^<<<^>^>^<^^>>^>v<vv^><>v><^>>^<^<^<v^v<v>v<^>>^<^>v>^^<<v^^vv<><<<vv^<^<<>v^>^v>vvv><><^^>^>^><v>^vv^>v^<<>v<v>v<^^^^<<v<^<>^^>^v^>^v><^v<^>^>>v^<<^<><>^^^>^<>^>^v<><<<<<<<<vv>>^>>^^vvv^^vv<<v><<<<<v<^><v<^<^^<vv^><<^v<^>v^<^<<vvv<<<<<v<^vv>^vv<<<v^v>^^>>^><<>><^^>>v^<v<vv^<>v><>><<v^^>v>^>>^v>^v^v^<>>^^^<^^>^>^><<vvv<<>v>^<>^<^>>^>v>^<<^v><v>v<<^^<^^>>v^^^>v<v<><v>^v<^>^vv>vv^^<><^>>><<v<><v><>>vvv>>^>>^^<^v<>>^^v<^<v^^^^^^><<^><vvv>^<^^>^>v>>><^<^^v^<<>v^v<><<>v><>^^<^^^vv^v>v^v^>><v^>^v^>^v^v>vv<^<v>>v^^><^>>>v^<^<>^><^^>v><<v<^>^^^<>^>>v^^<^>^^<vv^<^>^>^<>>v<v<>^v><>v<<>^>^vv<v>^>^<^<><^vv>v^><>^v>^<v><<<^v>^>v^>><<<<^<^>vv<>>^v^<v^<<^><>v><>>^v>^>v^><^vv>^v^><vv<>v<>^>^<>^v<^>>^v^<><<<^<<><^<v^>v>>^
^>>vv>^<v^v><v<>>>^^<v>^^v^>^^^^^v^<<^><v^^v>>>vvv><^<v<^<>v><>^<v<v><<v^vv>^>^^^<vvvv>v>v><>^>v>vv>><^<v^<<<<>>>v^<^v^v^><><<>^^^^^>^^>>>v<<<^v<^><<^>v<<>>v><<^<<<>^<<vv>^<><v><^v^^^>v<v<>v>vv>vv>^v>^<vv^<v>>><^>v<<v>^<^>^>vv<v>^^>vv>^vvv^vv<^>^^^^^<v^^>^><v<vv^v<>^>>^v<<>>v<>v><>^^<<v><<<<^v<<v<v^vv<vv>vv^^>>>v^^^<v>^^>^v>>><v>^^v^^<v<v<>>><><<^^^^v><<>><vv>^<<>v<v^^^vv><v^^vv<<^<v^^v>v^^>><<<<^v^^>><vvvvv><>>^^vv^>v^v^<<^^^<<^^<>^^^<<v<<<^^>v<<^>>v>^v<><>vv><<v<v>>v>v^<v>^^<^^^><>^<^v^^<>^^<><>^^^>^^><v>v^vv><<^<<><^>><v>v<v<<vv<^<vv>>v<>>v>^>^^^<^<^><^>vvv<<^^v<v><v>>>>><^v^<>v<vv<<^<<>^v^>^><<<^<v<><<<<<>v^>>><^^^v^^<>vv><^^^<>v^^^^vv>>><<vv<^v<>vv^vv<v><><^>vv^v>>vv<^^<<>>^^<^<<vv<<>v^>^<<^<>><<>>^vv>^v>vv<<>><vvv>vv^^^v><>>^^^v^<vv>v^>^v<<>vv<^vv<<v<>>>v<v<^<^<<^<vv^^<>>>^<^>vv><<vv<>>^^>^vv<<>>vv^<^<v><<^><<<^^>>v^>>v^>v>^>^<>>>^>v^v<v^<^^><^>>v^^^^><^v^>><><^>^^^v<>vv^^>vvv>v><>v>v<>v>><<>>^<v<>v^^<^>vvv<>v<<<vv>vv<<v<><>vv>>vv<^<v<^>v<^^^><>v>v^><<v<vv><^><vv>^vv>>>><v>v<^v^<
><<^v<>>v<v>>>>vv><^^>>>v>v^v<>^<>><<>^v>v><<<^<^v>v>vv><^^v^^>^<^<^><^^>>>v>^v<^v^^<v<^^^<^^v^>^>v^^vvv><<^>^>vv><v<<>^<^^^^<^^v^^>>>^<<<<><^<v^>^<<>v>>>v^<v^<<^<vv<><<v<^><>>v<>v^vvvvv<vvv<>vv<^^vv^vv<<^<^v<<<v<<<<>vv><<^<><<>^<v^v>^<<^v^^>v><v^v^v>v<><v^v<vv<^^v>^v<vv<v><vv>><<v>>vv<>v>vv><^v^<^<<v^>^<>>^>^v^v>^^^<v>v^^v><><><^>v>^<<^>vv>v>>>^<>^>^<v<v>^v><v>vv><^>v><<<<>v^v>>vv^^<>^>^^^>><<^^^^^^>>^<v^v<><<>><<^<>v<^<<><v><<^^<vv>^v<<v^<>vvvv<>v<<>>^v<><v<>v^<>v><^<>^<vvvv<<v^><<^^v><vv>v<vv^>>>vv>^<^>^v>>vv>v<<<^<>><^<<v<<<vv^^<^^v<>>>^v<v<<><v<<v<v<<vv^v^<<^>^vv<<<v<><v<>>v^<v^<>v^>>^v^^^^v^v<^^v<v><v><^v<<^^v^>v>vv^<<><^>>^><^<<v<<>><^>>vvv>^<^^><vv<^^vv^<v^>v>^>><><^^><v^>vvv<<>vvv<vv^v^v<<^>^^<>v><v>v>^^>^<v^^><<>^<<<vv><<>>vv^v<<<>v^vv>><><<vvv><^v<<v^v^^^v^<<>>>><<<>^<v><<>>>>v^v^<>>v<><vv>>><>^v^vv>^v^^>^>v<v><v>><<^vv<^>^v<v^<v^vv<v<^v<v^<>vv>^^^><>>vv<><<<^<v><<^<v^><<^>^<^v^>>v>><^v<<>v<^>^v><>>><v^>vv>>^v><<><vv<v>^^^<v>>^^<<v<>v^<<>^>vv>>v^v^^^v^<>>>v^vv<<><>>v^^^v>v^^
<>v>v<>v>^^<^^<>^<v>><v>>>><<>^>v>vv^v^>^v>v^>^^>^<<v<<^>>>>^><v>v^<^<^v<^^<^>>vv><v^>vv^<>vv>^>^^<<>^>v^^><^<^^<>>v>>^v^>>^>>>^>^^^^<<vvv>>vvvv^^^^v^v>^<^vvv<v^v^^>^v^>^^^>^<^>>v^>><^<^<v^^>^v^>^<<vv<<>v<<<v<^v^v>^v>><<<<vv<>>v^<vv>>>>><v>><<>^v<>vvv>^><vv^vv^<<>><><>^v<^^^>v><^v^<<<>>^^>^v^^v<>><^<^>^<^>^><^><v<><^<vv^v<><<>^<>v>>>>^vv<<v<>>^v^>^<^vv<<vv><<v<>^<vv>^>^<^v^<<<^<vv^^^^>>^<^<<>^>^v^v<<>vvv^vv<^v^v>^>>v<>^^v<v><^^v>vv>v^v>^>^<vv>>v^vv<<v^v^<>v>^>v<<v<^^^^v<^<^<v>>^^>^^^^v>^^^<v<<>vv<v<<^><>^><><><>><<><<^v<<vv^<^^<<<>^><<<v>^v>><^<^<>><<>v>^v^v>><v^^^>^^>v<vv>^^>vv^v>^^^v>v>^<^^v^v<^^<^vv^v<v>v^>>^^v^vv><v<>><^>^^<<^>>><^^<v>>v>^v>vv^^^<^<^^v^^^<v^><>>>v^^v><^^<vv^<<^^<^<vv><><<>v^>v^^><<v>><^><<><v^v><>v<^^>v^>>v>><><<<^<^<><>^v<<>^<<<v^^^<>><^^<>v<>^>><>>^<>v^><>v^^>^^<<<>v^<>><>>^>^<<>vv<<><>>>v><<>v<<^>v<<>>^v>vv<^<>v^>vvv>^^^^v><vvv^v>v>v^>^<>^<<^^vv>v^v<><vv>v^<v>>^^<^^<>v<^v>^>v^vv^vvv>^^v^^^^^>^vvv<^vvvv<^<><<><<<<<<^v>><<v^>>><>v>^^<^<^>>>>^>v^<^<>v^<>>vv<>v<>>>v
v<><<<v>v>^<vvvv>>v>><vv<>vvv^^v>v<>^>vv>>v>^v>vv^vvv^<v<<<vv^><<^v<v^^<><v>>>^>^^<<v>^<v<v>>>^<^><^>v<^<>v>v<>^^^^>vv^><v>v^>vv^^<<^>v>v>>^<>v^vv>vvv>v^v^>v><^>vv^^^^v><vv<>>>^vv^>^^>v^^v>v<>^v<^^vv<^v><<><<^>v<>>v>^>^^<^^>v<^v^v<^<>v>v>^><<^>>>^^v><<^^^>v>vv<vv>v>>v>v>v>>>^^^<^^>v><<>>vv<vv<<>v^<^v<<v<v<^>>v><^vv><v>^><^>>>><v<<v<><v<<vv>^>vv^><v>>vvv<^^v^>v<<>>v^v^^^>^^vv<>v^<><v<>>vv>^<^>^><v>>^^<<<v>^^^<^v^^^<^>v^vv><v>vv^><v<^v^^v^<<<<>v^<v>v<^<^v<>^^<^v^<>^^><<<v<<<vv<><v<<>^><<>v^>v^^<<v<>^^<<vv<v^v<<^<<><<^><v>><>>v<>^<>v<>v<<^^><v><>>^>>>^^^^>vv^v>>v^^<>vv>^v^<<v<><^<^<vv>><<^^>^vv^<<<<<^v>^^v^<^<<v<>vv>^<<><^vv<<<^^<^^>vv<^<<<><v>v>v^^^v^^<v><<<^<<vvv<v><v^^>>v<v><^<>>vv<v^^<vvv^^<<^^>^<^vvvv>v><><<<>v<^<<<v>>v><>v<>><^<v>v^>>>^vvv^^^^>><<v^>^vv^v>>^>v<<>>v<><^v<^^^>vv>^>>^<>v^>^^<>v<<>v<>><><v^<v^><>><>>v<v>^v<^vvvv^v><<^><v<v<^^>v^v><<^v<^^<<^^^<>vvv<vvv^vv>^>vv^>vvv>^v<v<<^^<^^^v<<vvv^v>>>>v^<<^v^<><^<v>>v>v^>^<>>v>><vv<<^^^^vv^^>>^<<>><<^><>v>^^^vv<<v^<>^v>v^v>v><v><^v^>
<>>^>><^><^^^>^vv<>v><><v<^v>v>v>><>>vv^>^>v<v<>>>>^>vv<v^v<>><vvv<<>^<v<>^>v^v>v><^>v<^^^v><>>^<vv^v<<v^<<><><^<v^^>v>><>>^<<v^<vv^^<><v>^><^>>vv<vv<>vvv^^<<^v<vv<>v<>>><><>>^>^v>v^>vv^v<<^v^^v<>vv^v^v<^>>v<v^>>vv^<^v<<^<>^^<<<^>v>^>^^>v>>^>>><^<^^^>v<>^^vv>><>>><^^>v>^<^<^^<>^>^<<>v^<>v^<^>^^>vv<>^>vv^^><><^^<vvv>v^<<^v^^v><^^>>>><><^vv^><v^><>v^^>>vvv<v^<<<vvv<><vv<vv^^v^v<>><^<<>v^>v>^^<<v<>><^^v><v<<^v<>><v><^^><<vv^^vv<v<>>>vv>>v<^>v^vv^^>^>>vv>v>>vv><v>^^v^<v>>^>>^<^><<v^<^>^><<vv^><>>><^<<v>v^^^<vv^^v<^^<<^v<v^>>^>^v^^^v>^<^^>^v^><vv>^^v>^><>vv^v^v>>><v^<>v^vv>>v<>v^<vv<^<v<><v<^^>^<v^<><vv>>>^v<vv>vv^vvv<<>^^v<^^^v<^v<><>v>>>^^>v><<>><v<<^v>^<<^><>^><^><<>>^<v^^v>v>>>^v^>v^v>^>v^>^><><<v<<<^^<^^v<v<v<^v^^<^vvv^^^v>^>><<v^v^>^v>vv<^vv^<^>>v<><^v<v^^vv<>>>vv^^v>^<>^>v<<>>vv^v<^>>v<><^v><>^^<^v<v>^^^>>>v><^<>>>><<v<>vv><v^<<<>v>^^^^^^v>>^<>>vv^<^>>^>>>vv^>v<^v<>v>><v^<>v>>>^^<<v^<v^^<>>><vv<v^^v>vvv<^<<<v<^>>v>>><^>^<^v>v<><<v^<v<v^>>vv>>>><<<<<v<v^^<<>>^^><>v^v>v<>>>><vv>^<^^<v>
vv>>>><>^<<<^><^^<^v>^^><<v^<>>>><>^vv<^v^^^<^^<<^<v<<>^<<<<v^<>>>^>^^v<<v>><><vv<>^^<<^<<><^^v>^<<^<>^v<^^^>^>^<^vvv^v^^v><vv^<>v^^<>>^<<v<>^<<>^>>>vv>vv<>vv<^>^><v<<>v<<>v>>>>^^^v><>^v<^v^>^^<<>^>^>v^vv^^><v<>^>^v^vv^<><v<v<<>^<^^<><^>v><<^v<<<>>v><<<^>><^^<vvv>^>^<>^>^>>>v^>^><<v^<v^<<<<^v^^><^^^>v>>><^^^v^<<>^<>^^<vvvvv>>v<v<<vv>^<^^^<<v^>v^v>^><>v^v^vv^<^<<<vv>vv^^<^v^<<v<v>><^>>^v^<<>>><vvv<<><^<<v<v^^<>v^vv^^^^<^^^v<>vvv^>>>v^>v>^vv>><^^v<<^>^>v<vvv<v^<>><<v<vv^v^><<>>v>vv>^v^>><>>^<<v<v>><<<^<v<><^v>v>^<<<<>v<^<^<^<>^^v<><^><<<>v<^v>vvvv<<<<v<<>^v<>v^^^><><v>><<^^v>>^>v>^^<<<^>v><v<^^>v>^<^>^<vv>^v^>^>^^^^<^^<><v<<^<^<^^>^<^v^^^^><v<^v>^<^>^v>^<<><^<<v>^vvv>^^^v^v^^><>v>v^><<^><<^^><^>^v^<v>^^^><><^>v^^v<^<<<^><vv>^v<<<<^<^vv^<^^v^>^v>v<>^^<^^^^>^^^<<^>>v<<^^v>v^^>^<^^^<>v<^<>vv>>v>^>>^v>v^<><v^v>v^>^^vvv^<vvv^^><>>>>>^^^<<^<<^^<^><^^<^<>>^v<<v>>v^v<>vv>>v>><v<^^<^>^<vv^<<^v<<<v^^>v>v>v<<vvv>><v>v<<v<>^<^^vv<>^^>><<>^vv><^^^><vv^^>>>>v>v>^v<><<<<<^v^>^^^<v<^^>^vv><><vv>vv<v^v<<
v^v><^<v><^>^v<^>^<v>>^^<v<>v^<^^>>vv><^vvv>v>><^>^>>>vv^<vvv<<vv<v<<><v^vvv^>^v>>v^vv>>^v^<<^^<<<vv<^<>^<><^<><v^vv^>><v>^>^v><>>^v<<>^>><>>v<<v<<^<^^^>^>>vv^>>^v<<<<^<>v<v^v<<^<><<<v^v>^v><^v^><>><v>v<v><<>^>>^^^^v><>><vvv<^vv<<v>^<<^v^>^^><v><^>vv^^<^^v<>^^v^v^^>v<><<<^><>>^>v^v<<v^^^v^v<^<<<^v^v^<>>vv^>v<^>^<v><v<^><^>v><v>^<<v<<vv><>><>>>><>v<v^v^>>v^^<v><>vv>><><^^<v<v<^^>>>><>^><<^v<><^v^<>>^^v^v^vvv<^^>^v<>v<^^^^<<><<^<<<^<>v^^v^v^^^<<<^<v^>><<<^^<^^>vv^v<>v>>><<v<>>^<<<v^<>>^><>^>^v><v^v^>^<<v<v^^v<^v<^<v>vv^>>>^^>^<>v^v^<^vvv>vvv>v><>vv>><>v>v>>>>v^>v>v<^v><<>^>>v^>^^>v^<>v^>vvv>v<>>v>>^^v>>v^>^^<>vv^^v<^<vv<^><>v<vv^<><<>>>v^v<<<^<>>>^>v>v>v<^^>v>^^^>vv>^^>^<<vv<^vv><>^^v<vv>>^>v>vv><>^>v^v><^>>^>^^<vvv^>>>v^<v>^^>><<>v><^<>>>^<>>>vv^>>v^<>v<^<<>^>>><^^^>^><<>v><>v^v^<v>v<>vvvv><^^>>^>>v<>^<v<<><>v<^^v><^>v<<^^>>^^^>v^<v<^<v>^>v<<v><><>><>^<>vv>v^>>><v^>^v>><^^<<vv<<v>>vv^^<^^v^v^>^<>v><>^^vv<<><vvv<^<^>v<<<^v^^>>v^<<^<<<>^v<>v><<^^v^><^^<<v<v>^<<<v><^^>>>^vv<>^>>v>vvv><^<^<
^v<>><<>v^>^>v><v^vv^^^^<>v<^<v<v^^^^^<v^^>^>v<<^v><^>><<>^^>>v^><^^>><^^><v^><<^v>v<>^^^v^<^^^^^vv^vv^^<v>><v^>v<^>>>v<>vv>>^>vv<>^>>^^>>vv>^v<<><^>>><^<^v^<^<>^^^vv^<<^^v<<vv^>>>^<^^>><^v><^^>><<<^><v^^^v<^^v<<v<v<<<v<^<<^v>v><>>><v>^v><^>^>v>v<v^<^v>>v><^>>^><^vv>^><^^>v<><v^>v<<v>>>^^>^<vv^<^<v<v<v<^v<<v>^<^^v^<>v^^^<v>^v^>^v^<^^>>v><v<><v>v^>v^^vv<<vv^^v^vv<vv><>^v>vvv^<^><v>><^^^>^^>>^<<^>>>>^^>^v>v^<<^>v^>^^^v<>><^<>^<v<>v^v>vv>^>>^><<<<^>>^>><^^v>v^>><^<<^^<vv^v^><v>>v^<<><>^><v^>><>>^><^<v^v<^vv<>v<><>v<v<>>^^v>^>v^<^^<v>v>v<v<<^<vv^>vvv^^>^<^>>v<vv><><<<vv^<<<^<<^^v<v<vv><v><<vv>>>vv<<v^^^^^^><<<^^>>v<^v>>>>v^^>v>>vvvv>v>><><<v^^v^v^vvvv<^v<^<v^^^>v^^v><v<vv<>v^v^^<^vvv^^^^v<^v>>v^>^^v<^^<^<>><>v>v^v^v><>^<^v^>v^>v^>v>^<^<^>vv><^^^^v><<><v<^^>>v>>^<>>><<<v^v>><><v^^v^^>v<vv>><^v>vv>v>>><>>v^<<>^<<^^>^^v^v^<<><^>>>>^>>v<v>^>>><^>v>^v>>>v>>>v<^v<<<^^^<^^^<^vv>>v>>v^v<^>>^<<v><<>^v<v^>^>v>vv^<>^>^^>>v><vv<^>>^<<>^^v>>v><^<^<^vvv>>^<^^^><<vvv>^^v<<>>v>>>>>>>^>vvv<^>vv^v^v>>>>>vv^
<<^^^v^^>^v<<^<v<>>>v<vv>v^><^<>^^><^>^><vv<v>v><v>>>v>v^>v<^v^>>vv><>^v>v>><^><<<>^<>^<v^^^^vv<<<>><v^v<v<v>><><>^>>^v^<<v<v<>^^^<^<<v^^v>v><<vv<^^><<><^v><^><<^v>>v<<v>^>^<><<^<v^v>^<^<^>>v^v><>v>>>^><>><><<>vv^>><^>>vvvv^^>><>^<<v<><>^vvvv>><^<^^^^<><^vv>v^^><<v<>v<<<v^^vv<^<vv^<^<><v><>vv>v<>^^<<v<<<>>^^<vv>>>vvv^v^>vvv<^<>>v<v^^^^><v>^^^v^<<^<>vv<^vvvv<<^^^^^<^<<^^<<>>>v^<v<^>v^<v<^><<>^>><<>>>><<vv<<>^^^^^vvv><<v^><v>^>>>>v^^>v>^^>^<<v<v^^<v<^<^^<>^v^>^>vvv<<<^^v><^v<><^v>>>>v>>^><^^>v<>^^vv<<<vvv>v^<v^>^>^<>^v<<v^<^v>^<<^^>>^<^vv>^^v<^>vv<<>^>>^v^><<^><v^^^<>>^<><<v<>v>v<v^<^v>>vv<<^v<v><v><v^<^<><^>^vv^<v^><><>^>><v<><><v><v^<^>>vv^^^<<v^v<<<v<^^>^<<^^<^vvv^>>^^v^><><<<^><^^<v<>^<>>>>vvvvv<vv^^v<^>>vv^v><<^>><>^v^<><<>v^^>>^<v^^v^^vv<<<^<<v>v^^^<v>>><^>^<^>v><<>>vv^^^>v<v<v^<>v>^>^><><v>v>v<<^^><>^><v>^v><>^>^><<<^^><<<>^^<^v<^><^>^>v>v>><vv<<>v<v>v^^>>>v><^>>v<v<^^^v>^<v<<>vv><<><vv<^^v<^<^^^>><>^>^v>>vv>^>vv^v^>>^<<>^^>vv^<<^<^^>v^>><v<<<<vv<><>>>v^><v><^>^^><<v^v^vv<vv^^><>>
>^<<><>^>><^^v>v^v>v>vv<<>^><>^v<>><<<<>^^vv>v><>^^><<vv>^^<><^>>><v^<<<><>v>^^^><^<^vv^v<vvv^^<v>^<^>v<<^<>v^v^^<v^^<^v^><v>^>>v><v><^>v^^v<v><>^vv<>^<>^^<<^^v<^<>>^<^<^^v<>v<^^><<^^>v<v<>^><^^v<<^>v^v<<>v<^<^v<>v<^>v>vvv^><<<^v<^^>v><^v^v<^<><<<^vvv>^v<^>>>^v^>>^<v<><v><<vv<<<^<vvv>>v^vv^^^>^^>><>^v><<<^v^>^^><>v>^^^<v<^^v^v>>>^^v^>^<v>vvv^<^<<<^^<>^>>^>^vv^v><v>^^^v><^v<>>><><v<>vv<^^v>^vv>>><^<^v<^>>>^v>><>><^<>vv^<^vv>>>^<>^^^v<<>><<<>><v<>v<<<<^v^>^^<^<>>v^^vv<v>>^^^>v>^vv>v^<^^<>v><v^^v^^^><>^^v<>vv<>^v^^^v<><^v><v^>^>v<<>v<<>>>^>v>><>v>vv^<^^^>v<^<><<v<><<>v>^>^<^^>>v^<><^^<<><vvv^>>vvv>v<>>^^^vv>vvvv<<<^^^>v^>^^>>^^vvv>v^<v^^^>>>^><>v<v^v<<v<><>v^>vv<>>>><v>v>vv><<v<v^>v^>v<^>>^v<><v^^>>>v<v>^<^>v><><<<<>^<><<>^><v<^v^v<v<<vv>>>^^vv>>^<^vv<><vv<>v<^v^>^^>>>><vv^^^vv^^<^>>><>>^<v<^vv><<vv<<^>><^^<v^^v><><<^v<>><vvv<v>v>>>>>^<^^>v^<^v<>^>>><<v<>>>^<v^vv^v^<^>^v^>>^<<v^v>><^>>>^<>>>^>vv<<^>v<<v>^><<^>v><>v^v>vv<<^<<^^><<<v^v^<><^>v><>v^<^^^><>><^><vv^vvv>^v>v^vv>^<^>v<vv<<<<<<v><
v<v>vv<v>^<^>><>>^>>v^v^^>><>v>v<v^<>^^^<>v<>^^<>vv>v>>^^^vv<^<^v^v^<>v<^^<>vv<v>v^v^v>><vv>><<><>^v^>^v^<^<v<vv^^^<v^v<<<<^<>>v>v<<v^<v^^v^<v^>><>^>^><v<><v<>^><^>v<v^vvv<vv^v^<>v>^^^<><^>v><v^<>^^>^v<^<v<v<<v^<<<<v>><>vv>><>>>v>^<^v>v^^<v<><^<>v>^<v^^^^vv^>><<vv>>>v>v^><><><<^vv<<vv>>^<<<^v<>>v><vvvv<vv<^>v^v><v<<><><<vv<>>v^v><v^vvv^>^<<>>^^^><>v^^<^><<^><^<<v<^v^v^<>>^<^v<<<>v>^<<v^>^vvv<<^^<<<v<^^>><<><v>^><v>v>^>^>^>>v>^^<>^<v<v^<>v><<^<>^><<v<^v^^<<^<^<^<v^<<>^>>>><<<^<<^v>^<^^<<v^>^^v<v<v><<v<>>v^v<^>>>v^>v><<v<>^^>^^><^v<<<><<><<v<<>v>>><<>>v>^v^v<<^v^<v>^<<v>^v<v<vv>^<^<>v>>^<v><v>vv<^<^vv^><>^>>^^vv^^^>v<>>^>><vvv^>^<^v<<v^^^vv^v^^v<<<v>v<>^v^><^>^v>><<>^>v><^v>v>^v>>v^v><<><v^v^v<v^^^>^^<<<<^^^^>v><^<<<v^^>v<^^<^><^>^>>>>v>>^<><v^<>v>v<><^^^v<><^><<vv>><v<><v<^^<v>v>^>vvv>v^^vv<<>v<>vv^^^>v^<^v><<^>>^<<v^v^<v<<<^v<>v><>v>>v>>^>v^v>v^>v^>v^<<v^^^>^v^^>><<>^>v^<>v^<v^>>vvv>>><^>vv^^v<>vvv^<^^v^>>>^v>v<>v>^^><v^v<<^^>>vv>^vvv>^vv^>vv^^v^^<<<^<^<><<v<^>v<^^<><vv<v<<<<^v<>v><<<>
>v<<^v>^<v>>^<<<^<>>^>^<^vv^^<v<^>v>>v<<^>>^^v>^>^>^<v^^^v>><>>><><>>v<v>^>v^>^^v^<vv^^<>^v<>v^>><><v<>>^^v<<><^^<<<<>v<^><v<<^^^<>>^><^<^v^v>^>^>vv^v<v^<>>^><<><><<v^v^v^v^<^><^>>>>^<^<^><vv^v>^<v>^>^^<v><<><v>^^^^^<>^>vv^^^><^>>^v^^^>^>>vv>^<v>v^^v<<v>^^v><^^<<v^<><<^^>^<<<>>^<v<v^v^^<v>^v^>v^>^<>>v^>^<<^<<^vv>vv>>v^^>vv<>>vv^v^><^^<><>><^>>vv^>>^<^<v^v^>v><v><<>^^v^<>v>vvvvvv<v^^v^v^^^<<>vv>>>v<v^<>>^v>v<><v^>v>^>v^<>>vvv^^>v<^>><v^<<v>^^<<vv<^>v><^^^^<v<v>><^<>>^^v<><<>v<^vv<^<>^v>>>v<vvvv>><<^><v<>^>^v<>>^^^>v>^>><<<vvvv<><><v>><^vv<^>^>v^^v^v^^>v<v<vv<<>^><><^vv>^>>^v^v>><<v>v^^v<>v>^>v><>vvv>>vv>v<^vv<vv<><>v>>v><<>v<>^<^^^v^<<><^v^<<<>v<<>><^<^<^>>v^<>^<><^<^<^<>^^v<^^>^^<<v>v>v<<<vv<>>^^v>v>>^>^^>>^v><>^>>>><><>v<>^<>vv<>v>^>vv>><^v^vv^>^<<vv^^vvv>^<<>^<vv>><v^^v><<^><vv^^^<<^<<^<^<>v>^^>vv^^<^vv^>vvv^>vv^>^<^>^^<<>^^vv^v^>^v><^^<^^<<v>>^<v><>v<<><v^v<v<>>>^<v>v><>><v^v<^>>v<<v>v<>v>vv>^^v^^v>>^v^^vv<<^>><v>^<^<^<^v^>vvv>>^<vv<>^>^<<^<>>>vv<<v<>>v><<>^v^v>^^<v<>v^<<v><><<v<^^^
^>v>v>>v>^<>v^<<<><<><^>v^<>v<v^<^<>>^v<<<>^^>^^^^>vv><v^v<<<><^>vv<>^^<^^^v<^<^vvvv<><^<v<v<<<vvv>><<vv><v><>>v<<^v>vv^<^^v<<>^<vv^>vv>>>v<vv<v^^v^<^v<^>>^>>v^<>><v<<<v^<<v>^<<^^v<><>>>^<v^<>>>>^v^^^><<<>>v>^^<^<>><<v<^<v<^<vv>><>^^v^<<^>^<>^>>>^v><v>v^^^v<v>^<<v^><>v<>>><v<v^><<v<<>><^>^^>v>v>vv<^>>^v><v^^>><<>v^^><^vv>>>>v^<^^^<<vv>vv>^v<<<v^<>v^v>^v>vv<vvv<vv<v^^><><^^>v<<<>^>^<<>>vv><v<v^v>v>>>><^>v^><>vv^^vv^^>^><<>v^^>>^v<><^<vvvvvv<v^<v>^v>>v^^><v^><^>^v>>>>>><^<<<^v>^v^^^><^>^<><vvv^<^<>^<v<^^^<><>v^<^^^^^>v<<^^>^^<>v^^v<>>><v^<>v<^^<v^^vv^^<<v^>><>^<^><v>><>v>v<>>^><<^v<^^^>>>^<vvv<v<v<<v^<vv<>>v<^>^vvv<>>^>>v^^<<^<<<^>v<<>v<vv><^<<^vv>v>^<v^^><v^<>^>v<v>>^<>v<<v^>v^^<v>^v^>>v^^>^^v^<vvv^v^^v>v^<<<<>>^vv<>>v>vv^<>vv<vv^<v<^vv<<<^<v^^v<^^^^^>^>v^^v^v>v>><v>^>vv>v><^<>vvvv^v>^^vv>>^vvv<v^^<v^><v>^^^v><v^vv<<vv^<^>vv<v>^>>v<vvv<^>vv<^v>^><<<<^>^<v^^v<<<^^<>v^>v^>>v<>>v<<>>^v>^^<<<v><<v>v<^<v<<<>v>>>^^<v^<^>>v>v^<v<^v^<^<>>><^<^v<<^v^vv^><v^<><>>^^<<>^v><><v>>^><v<^^>v>^v<<^<v^^v"""


maze, movement = input.split('\n\n')
maze = maze.replace('#', '##').replace('O', '[]').replace('.', '..').replace('@', '@.')

maze = [list(row) for row in maze.split('\n')]

M, N = len(maze), len(maze[0])

robot_start = (0, 0)
for i in range(M):
    for j in range(N):
        if maze[i][j] == '@':
            robot_start = (i, j)
            maze[i][j] = '.'
            break


def partner(maze, i, j):
    if maze[i][j] == '[':
        return i, j + 1
    if maze[i][j] == ']':
        return i, j - 1
    assert False


def push(maze, x, y, dir):
    boxes = set([(x, y), partner(maze, x, y)])
    q = [(x, y), partner(maze, x, y)]

    while q:
        print(len(q), q)
        next_q = set()
        for i, j in q:
            if maze[i + dir[0]][j + dir[1]] == '#':
                return False, maze, 0, 0
            if i + dir[0] < 0 or i + dir[0] >= M or j + dir[1] < 0 or j + dir[1] >= N:
                continue
            if maze[i + dir[0]][j + dir[1]] in '[]':
                boxes.add((i + dir[0], j + dir[1]))
                next_q.add((i + dir[0], j + dir[1]))
                if partner(maze, i + dir[0], j + dir[1]) in boxes:
                    continue
                boxes.add(partner(maze, i + dir[0], j + dir[1]))
                next_q.add(partner(maze, i + dir[0], j + dir[1]))

        q = next_q

    next_maze = [list(row) for row in maze]
    for i, j in boxes:
        next_maze[i][j] = '.'

    for i, j in boxes:
        next_maze[i + dir[0]][j + dir[1]] = maze[i][j]

    return True, next_maze, x, y


for c in movement:
    # print('\n'.join([''.join(row) for row in maze]))

    i, j = robot_start
    dir = (0, 0)
    if c == '<':
        dir = (0, -1)
    elif c == '>':
        dir = (0, 1)
    elif c == '^':
        dir = (-1, 0)
    elif c == 'v':
        dir = (1, 0)
    else:
        continue

    print(robot_start, dir)

    i += dir[0]
    j += dir[1]

    if i < 0 or i >= M or j < 0 or j >= N or maze[i][j] == '#':
        continue

    if maze[i][j] in '[]':
        # push boxes in dir

        # BFS in dir, to find all boxes which are pushed, keep a list of all boxes which need to be pushed afterwards, if any box is found which is not pushable, break and dont push any boxes -> continue

        succ, maze, i, j = push(maze, i, j, dir)

        if not succ:
            continue

    robot_start = (i, j)


print('\n'.join([''.join(row) for row in maze]))

sum_wall_coords = 0
for i in range(M):
    for j in range(N):
        if maze[i][j] == '[':
            sum_wall_coords += i * 100 + j

print(sum_wall_coords)
